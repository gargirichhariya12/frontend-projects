<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Create GIF in JS</title>
  </head>
  <body>
    <canvas
      id="frameCanvas"
      width="480"
      height="360"
      style="display: none"
    ></canvas>
    <button id="createBtn">Create GIF</button>
    <div id="result"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.min.js"></script>
    <script>
      document.getElementById("createBtn").addEventListener("click", () => {
        const canvas = document.getElementById("frameCanvas");
        const ctx = canvas.getContext("2d");

        // Create a GIF instance
        const gif = new GIF({
          workers: 2,
          quality: 10,
          workerScript:
            "https://cdnjs.cloudflare.com/ajax/libs/gif.js/0.2.0/gif.worker.js",
        });

        // Define frame count and animation parameters
        const totalFrames = 30;
        const width = canvas.width;
        const height = canvas.height;

        // Example: Add frames by drawing motion / blur effect
        for (let i = 0; i < totalFrames; i++) {
          ctx.clearRect(0, 0, width, height);

          // Draw something (e.g., speed blur or moving shape)
          // Replace with your own design logic
          ctx.fillStyle = `rgba(0, 0, 0, 0.1)`;
          ctx.fillRect(0, 0, width, height);
          ctx.fillStyle = "white";
          ctx.beginPath();
          ctx.arc(240 + Math.sin(i * 0.2) * 100, 180, 50, 0, Math.PI * 2);
          ctx.fill();

          gif.addFrame(ctx, { copy: true, delay: 50 });
        }

        gif.on("finished", function (blob) {
          const img = document.createElement("img");
          img.src = URL.createObjectURL(blob);
          document.getElementById("result").appendChild(img);
        });

        gif.render();
      });
    </script>
  </body>
</html>
